# This file is sourced by tmux-open.sh
# Its purpose is to separate all session functions from the session opener script.

tmux_session_gestao() {
	if [ -z "$(type -p rails)" ] ; then
		echo 'Rails is not installed, aborting...'
		exit
	fi

	tmux new-session -d -s $FUNCNAME 'cd ~/Dropbox/src/ruby/gestao-escolas/ ; rails server'
	tmux split-window -t $FUNCNAME:0.0 -v -p 80 'cd ~/Dropbox/src/ruby/gestao-escolas/ ; bash -i'
	tmux split-window -t $FUNCNAME:0.0 -h 'cd ~/Dropbox/src/ruby/gestao-escolas/ ; bundle exec guard'
	tmux select-pane -t $FUNCNAME:0.1
}

tmux_session_git() {
	tmux new-session -d -s $FUNCNAME 'cd ~/src/local/dev_bin/ ; git bs ; bash -i'
	tmux split-window -t $FUNCNAME -h 'cd ~/src/local/dev_htdocs/ ; git bs ; bash -i'
}

tmux_session_mysql() {
	tmux new-session -d -s $FUNCNAME 'mysql -h 10.20.26.29 -u developers -pgAt01at390 -D dev_xavier'
	tmux send-keys -t $FUNCNAME:0.0 'C-l'
	tmux split-window -t $FUNCNAME -v 'mysql -h 10.20.26.29 -u developers -pgAt01at390 -D test_xavier'
	tmux send-keys -t $FUNCNAME:0.1 'C-l'
	tmux select-pane -t $FUNCNAME:0.0
}

tmux_session_vm206() {
	tmux new-session -d -s $FUNCNAME 'ssh vm206'
	tmux setw utf8 off
	tmux split-window -t $FUNCNAME -h -p 20 'ssh vm206'
	tmux send-keys -t $FUNCNAME 'C-l' 'devqa-error-log.sh -n 19' Enter
	tmux split-window -t $FUNCNAME -v 'ssh vm206'
	tmux send-keys -t $FUNCNAME 'C-l' 'tail -F /var/log/httpd/test_php.log | grep -i xavier' Enter
	tmux select-pane -t $FUNCNAME:0.0
}
